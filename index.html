<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="写作与编程">
<meta property="og:type" content="website">
<meta property="og:title" content="wfang&#39;s notes">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="wfang&#39;s notes">
<meta property="og:description" content="写作与编程">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wfang&#39;s notes">
<meta name="twitter:description" content="写作与编程">
  <link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>wfang's notes</title>
  <meta name="generator" content="Hexo 3.9.0">
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wfang's notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">record something</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            
  <div id="posts" class="posts-expand">
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/22/容器技术原理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/10/22/容器技术原理/" class="post-title-link" itemprop="url">未命名</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-22 23:43:26 / 修改时间：23:44:15" itemprop="dateCreated datePublished" datetime="2019-10-22T23:43:26+08:00">2019-10-22</time>
            </span>
          
            

            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/10/22/容器技术原理/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/22/容器技术原理/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>容器技术的核心是linux提供的两种隔离技术：NameSpace ，Cgroup</strong></p>
<p>‌</p>
<p><strong>NameSpace</strong></p>
<p>‌</p>
<p>namespace是对操作系统这类软件资源的隔离，更形象的说namespace改变了进程<strong>看待自身存在环境的视角</strong>。</p>
<p>‌</p>
<p>命名空间有6种分类(实际是7种)，定义了操作系统不同资源的隔离：</p>
<p><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LfD58EbdYeg5SpfVrCe%2F-LfIS1JjlD2-D9pJ1e2q%2F-LfIS8t3h5lrWGT71faf%2Fimage.png?alt=media&token=5686febb-8c9c-40d0-ba51-ed9253a549c8" alt="img"></p>
<p>命名空间分类Enter a caption for this image (optional)</p>
<p>‌</p>
<p>查看进程13532的命名空间：</p>
<p><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LfD58EbdYeg5SpfVrCe%2F-LfIS1JjlD2-D9pJ1e2q%2F-LfISDnwYE0lV-e7hgyO%2Fimage.png?alt=media&token=1f1024ba-5c9a-45c6-8841-ba2b38dd52a3" alt="img"></p>
<p>Enter a caption for this image (optional)</p>
<p>‌</p>
<p><strong>Cgroups</strong></p>
<p>‌</p>
<p>Control groups(控制组)简称为Cgroup，可以将计算机的资源(物理资源)组织成层次树的结构，来控制、监测进程对这些资源的使用情况。</p>
<p>‌</p>
<p>在如下的层次结构中，通过cgourp FS来组织资源使用关系，这里依附(attach)在层次结构上有两种资源分别是CPU和内存。</p>
<p><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LfD58EbdYeg5SpfVrCe%2F-LfIS1JjlD2-D9pJ1e2q%2F-LfISNm0Rji4OZsyMe37%2Fimage.png?alt=media&token=d5b888ba-f528-40f4-8fab-9baf34d2e796" alt="img"></p>
<p>Enter a caption for this image (optional)</p>
<p>‌</p>
<p><strong>示例:</strong></p>
<p>‌</p>
<p>可以观察到程序asd跑满了一个核：</p>
<p><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LfD58EbdYeg5SpfVrCe%2F-LfIS1JjlD2-D9pJ1e2q%2F-LfISR4gGh5geyCIF50a%2Fimage.png?alt=media&token=112bf18a-6536-4da4-80ab-ed807ca7b24f" alt="img"></p>
<p>Enter a caption for this image (optional)</p>
<p>‌</p>
<p>然后，我们在/cgroup/cpu创建一个my_test得文件夹，那么my_test就是一个cgroup</p>
<p><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LfD58EbdYeg5SpfVrCe%2F-LfIS1JjlD2-D9pJ1e2q%2F-LfISVmSeNECzNZOCDQL%2Fimage.png?alt=media&token=0db013ac-1eff-447a-afdb-e63b7924ee32" alt="img"></p>
<p>Enter a caption for this image (optional)</p>
<p>‌</p>
<p>可以看到my_test中自动初始化了很多配置文件，可以用来控制cpu的使用限制，这里我们改动两个配置：</p>
<p>‌</p>
<p>cpu.cfs_period_us = 100000      // 统计周期100ms</p>
<p>‌</p>
<p>cpu.cfs_quota_us = 10000         // 在统计周期内允许使用的cpu时间：10ms</p>
<p>‌</p>
<p>这样我们就定义了一个cpu限制为10%的cgroup，接着将 pid = 834 写入 cgroup.procs文件内，观察top:</p>
<p><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LfD58EbdYeg5SpfVrCe%2F-LfIS1JjlD2-D9pJ1e2q%2F-LfISYoC1_ZlckkTs6pR%2Fimage.png?alt=media&token=68cd7a36-b94b-42de-ab99-dbc8b6366e96" alt="img"></p>
<p>Enter a caption for this image (optional)</p>
<p>‌</p>
<p><strong>进程与容器在概念上的边界</strong></p>
<p>‌</p>
<p>从上述的基础知识看以看到，进程和容器在概念上边界越来越模糊，容器即为具有<strong>特定命名空间及Cgroup的进程集合</strong>。</p>
<p>‌</p>
<p><img src="https://www.backblaze.com/blog/wp-content/uploads/2018/06/vms.png" alt="Virtual Machine System Architecture Diagram"><img src="https://www.backblaze.com/blog/wp-content/uploads/2018/06/containers.png" alt="Containers System Architecture Diagram">     </p>
<p>‌</p>
<p>虚拟机   vs   容器</p>
<p><img src="http://wiki.baidu.com/download/attachments/754992175/image2019-5-17_10-34-59.png?version=1&modificationDate=1558060499000&api=v2" alt="img"></p>
<p>Enter a caption for this image (optional)</p>
<p>‌</p>
<p>宿主机与容器</p>
<p>‌</p>
<p>从以上内容上可以看出为什么说 容器要比虚拟机的资源利用率高，因为 容器内的进程就是 <strong>宿主机上的普通进程</strong>，直接利用 宿主机上的各种资源。</p>
<p><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LfD58EbdYeg5SpfVrCe%2F-LfISyCmT54mSc-HS2ft%2F-LfIT0eAUW_Iq6ZjDyFd%2Fimage.png?alt=media&token=6e8a8bc2-c4c5-40d1-9306-d9db370ade65" alt="img"></p>
<p>Enter a caption for this image (optional)</p>
<p>‌</p>
<p>在宿主机上观察一个docker容器实例，如上图，上面的每一行都是一个进程，进程间有继承关系。</p>
<p>‌</p>
<p><strong>contaninerd</strong>: daemon进程</p>
<p>‌</p>
<p><strong>contaninerd-shim</strong>：容器的”0”号进程</p>
<p>‌</p>
<p><strong>其余</strong>：容器内的各个进程</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/22/innodb内存管理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/10/22/innodb内存管理/" class="post-title-link" itemprop="url">Innodb内存管理</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-22 23:39:35 / 修改时间：23:41:16" itemprop="dateCreated datePublished" datetime="2019-10-22T23:39:35+08:00">2019-10-22</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/10/22/innodb内存管理/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/22/innodb内存管理/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>源码文件：mem0pool.c<br>功能：为innoDB中的内存堆对象提供所需的内存空间</p>
<h3 id="内存池的元信息"><a href="#内存池的元信息" class="headerlink" title="内存池的元信息"></a>内存池的元信息</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Data structure for a memory pool. The space is allocated using the buddy</span></span><br><span class="line"><span class="comment">algorithm, where free list i contains areas of size 2 to power i. */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mem_pool_struct</span>&#123;</span></span><br><span class="line">	byte*		buf;		<span class="comment">/* 内存池地址 */</span></span><br><span class="line">	ulint		size;		<span class="comment">/* 内存池大小 */</span></span><br><span class="line">	ulint		reserved;	<span class="comment">/* 内存池中已用内存大小 */</span></span><br><span class="line">	<span class="keyword">mutex_t</span>		mutex;		<span class="comment">/* mutex protecting this struct */</span></span><br><span class="line">	UT_LIST_BASE_NODE_T(<span class="keyword">mem_area_t</span>)</span><br><span class="line">			free_list[<span class="number">64</span>];	<span class="comment">/* 内存块列表，内存池被划分为许多2^n大小的内存</span></span><br><span class="line"><span class="comment">							块，其中大小为2^n的内存块被链接成链表，使用</span></span><br><span class="line"><span class="comment">							free_list[n]表示*/</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// typedef struct mem_area_struct mem_area_t;</span></span><br><span class="line"><span class="comment">/* Memory area header */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mem_area_struct</span>&#123;</span></span><br><span class="line">	ulint		size_and_free;	<span class="comment">/* 内存块大小与使用标志位复用，其中最后一位</span></span><br><span class="line"><span class="comment">                                  为1表示空闲，0则表示被使用 */</span> </span><br><span class="line">	UT_LIST_NODE_T(<span class="keyword">mem_area_t</span>)</span><br><span class="line">			free_list;	<span class="comment">/* free_list.next和free_list.prev作为链表的链 */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>结构体mem_pool_struct记录了内存池的元信息，而结构体mem_area_t则记录了内存块的元信息</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/10/22/innodb内存管理/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/22/natfilter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/10/22/natfilter/" class="post-title-link" itemprop="url">Linux——NAT原理</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-22 23:35:36 / 修改时间：23:47:17" itemprop="dateCreated datePublished" datetime="2019-10-22T23:35:36+08:00">2019-10-22</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/计算机网络/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/10/22/natfilter/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/22/natfilter/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Netfilter框架"><a href="#Netfilter框架" class="headerlink" title="Netfilter框架"></a>Netfilter框架</h2><blockquote>
<p>Netfilter is a framework for packet manipulation and filtering. The framework provides access to packets through five hooks in the Linux kernel at key points in packet processing. The hooks exist for both IPv4 and IPv6. Figure 1 shows in which order the Netfilter hooks are called when processing an IPv4 packet. The return value from a Netfilter hook must be one of five options: NF_ACCEPT, NF_DROP, NF_STOLEN, NF_QUEUE, NF_REPEAT. The first two options accept or drop a packet, respectively. If multiple functions are attached to a hook, the packet will be dropped if a single function returns NF_DROP. The return value NF_STOLEN indicates that a packet has been consumed by the hook function and further processing by other functions attached to the hook is not possible. NF_QUEUE indicates that the packet should be inserted into a queue, and NF_REPEAT indicates that the hook function should be called again. When functions are registered to Netfilter hooks, a priority of the functions is given. This priority determines in which order the functions attached to the same hook are called. </p>
</blockquote>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/10/22/natfilter/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/08/golang学习——pprof/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/10/08/golang学习——pprof/" class="post-title-link" itemprop="url">golang性能分析</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-08 21:34:05" itemprop="dateCreated datePublished" datetime="2019-10-08T21:34:05+08:00">2019-10-08</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 22:15:21" itemprop="dateModified" datetime="2019-10-17T22:15:21+08:00">2019-10-17</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/golanng/" itemprop="url" rel="index"><span itemprop="name">golanng</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/10/08/golang学习——pprof/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/08/golang学习——pprof/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="程序性能分析"><a href="#程序性能分析" class="headerlink" title="程序性能分析"></a>程序性能分析</h2><p>sampling profile这个名词，在程序性能分析中经常出现，一般可以翻译做采样分析：根据特定的事件点，对程序调用栈进行采样，并进行后续的分析。例如：根据一定频率采样分析cpu使用 或 根据内存分配点采样分析内存使用情况。</p>
<h2 id="Golang-Profiles"><a href="#Golang-Profiles" class="headerlink" title="Golang Profiles"></a>Golang Profiles</h2><p>golang的工具包中提供了一个叫做pprof的工具，可以用来操作golang生成的profile文件。而对于profile文件的内容有如下解释</p>
<blockquote>
<p>Often these profiles represents data collected through statistical sampling of a program, so each sample describes a program call stack and a number or weight of samples collected at a location. pprof is agnostic to the profile semantics, so other uses are possible. The interpretation of the reports generated by pprof depends on the semantics defined by the source of the profile.</p>
</blockquote>
<p>可以看到golang生成的profile内容抽象来说 就是 具有”重量”的调用栈的集合，这里的重量根据不同的语义会有不同的含义，比如分配的内存大小，或者 频次。由于profile的格式是抽象的定义，因此用户可以实现自己的profile采样方法，而pprof工具对其的解释则依赖于用户对profile的语义定义。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/10/08/golang学习——pprof/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/08/RocksDB——限流模块/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/10/08/RocksDB——限流模块/" class="post-title-link" itemprop="url">RocksDB——限流模块</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-08 14:08:33" itemprop="dateCreated datePublished" datetime="2019-10-08T14:08:33+08:00">2019-10-08</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 23:06:19" itemprop="dateModified" datetime="2019-10-09T23:06:19+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术积累/" itemprop="url" rel="index"><span itemprop="name">技术积累</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/10/08/RocksDB——限流模块/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/08/RocksDB——限流模块/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="限流模型"><a href="#限流模型" class="headerlink" title="限流模型"></a>限流模型</h2><p>限流常见的基础模型大致有三种：</p>
<ol>
<li>计数器</li>
<li>令牌桶</li>
<li>漏斗</li>
</ol>
<p>相关的资料很多，这里就不一一介绍了。例如：<a href="https://www.cnblogs.com/linjiqin/p/9707713.html" target="_blank" rel="noopener">https://www.cnblogs.com/linjiqin/p/9707713.html</a></p>
<h2 id="RocksDB的限流算法"><a href="#RocksDB的限流算法" class="headerlink" title="RocksDB的限流算法"></a>RocksDB的限流算法</h2><p>周末在家看RocksDB的时候，发现其中实现了一个小巧的限流算法，主要用来限制磁盘的读写速度，挺有意思的，拿来做下笔记。</p>
<p>代码地址：<a href="https://github.com/facebook/rocksdb/blob/master/util/rate_limiter.cc" target="_blank" rel="noopener">https://github.com/facebook/rocksdb/blob/master/util/rate_limiter.cc</a></p>
<p>这个限流类的模型是基于令牌桶的，下面我会将源码简化介绍，主要分为3个部分：</p>
<ol>
<li><p><strong>GenericRateLimiter::Request(int n)</strong> ：请求n个token，如果不满足条件就阻塞，直到产生足够的token</p>
</li>
<li><p><strong>GenericRateLimiter::Refill</strong> ：填充token</p>
</li>
<li><p><strong>GenericRateLimiter::Tune</strong> ：根据token消耗频率，自动调节token生成速率</p>
</li>
</ol>
<p>其次是一些关键变量：</p>
<ul>
<li>rate_tokens_per_sec：每秒产生token速率</li>
<li>refill_period_us：填充周期</li>
<li>leader：负责填充token的线程</li>
</ul>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/10/08/RocksDB——限流模块/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/27/流量回放—goreplay/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/27/流量回放—goreplay/" class="post-title-link" itemprop="url">基于goreplay的流量回放方案</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-27 10:43:28 / 修改时间：16:54:20" itemprop="dateCreated datePublished" datetime="2019-09-27T10:43:28+08:00">2019-09-27</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术积累/" itemprop="url" rel="index"><span itemprop="name">技术积累</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/09/27/流量回放—goreplay/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/27/流量回放—goreplay/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="流量回放的意义"><a href="#流量回放的意义" class="headerlink" title="流量回放的意义"></a>流量回放的意义</h2><p>流量回放在系统改造、Case覆盖、性能测试等领域有重要的作用。例如：在系统改造中，新系统可能采用了新的技术栈或者进行了代码重构，但他们的功能逻辑是相同的，应该对外有一致的表现。如果由人工检验，不仅工作量巨大，并且case覆盖可能不全，此时如果使用流量回放机制引流线上的真实流量到新系统，并对比双方表现，将可以安全、有效、快捷的验证新系统的正确性。</p>
<p>目前市面上的流量回放方案有很多，但大体框架是一致的，一般而言流量回放可以分为两个步骤：</p>
<ol>
<li>流量录制：将线上流量以文件或其它存储方式保留起来，供后续分析使用</li>
<li>流量回放：可以对录制的流量，进行加工、放大等操作，回放到验证系统中</li>
</ol>
<p>除了大致的方案，回放工具也是五花八门，有基于nginx的、自研的、还有比较原始的复制线上日志，线下模拟的等等，不一而同。下面介绍一种基于goreplay的流量回放方案。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/09/27/流量回放—goreplay/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/25/golang学习系列2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/25/golang学习系列2/" class="post-title-link" itemprop="url">golang学习系列2——内存管理</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-25 23:13:54 / 修改时间：23:31:34" itemprop="dateCreated datePublished" datetime="2019-09-25T23:13:54+08:00">2019-09-25</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/golanng/" itemprop="url" rel="index"><span itemprop="name">golanng</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/09/25/golang学习系列2/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/25/golang学习系列2/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>golang的内存管理方式是基于<a href="https://gperftools.github.io/gperftools/tcmalloc.html" target="_blank" rel="noopener">TCMalloc</a>设计的。</p>
<h3 id="TCMalloc概述"><a href="#TCMalloc概述" class="headerlink" title="TCMalloc概述"></a>TCMalloc概述</h3><h4 id="内存分配"><a href="#内存分配" class="headerlink" title="内存分配"></a>内存分配</h4><p>TCMalloc为每个线程分配一个thread-cache，该结构用于分配小对象内存（&lt;256K），其组织方式按照对象大小分类，当分配小对象时，直接从线程本地缓存中取得相应的对象，消除线程间竞争，如下所示：</p>
<img src="/uploads/golang学习系列2/image-20190925231553964.png" alt="image-20190925231553964" style="zoom:50%;">

<p>​                                                                                      thread-cache</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/09/25/golang学习系列2/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/25/golang学习系列1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/25/golang学习系列1/" class="post-title-link" itemprop="url">golang学习系列1</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-25 22:32:24" itemprop="dateCreated datePublished" datetime="2019-09-25T22:32:24+08:00">2019-09-25</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-27 17:52:27" itemprop="dateModified" datetime="2019-09-27T17:52:27+08:00">2019-09-27</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/golanng/" itemprop="url" rel="index"><span itemprop="name">golanng</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/09/25/golang学习系列1/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/25/golang学习系列1/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="编译与调试"><a href="#编译与调试" class="headerlink" title="编译与调试"></a>编译与调试</h2><p>作为一门静态编译型语言，其会将源码编译为ELF文件，golang默认使用静态链接，因此一般来说，golang编译后的可执行文件，外部依赖较少，有利于环境部署。</p>
<p>为了便于调试，可以在编译时给与编译器相关指令，关闭内联及优化，go build -gcflags “-l -N” test.go。</p>
<p>可以使用GDB进行相应的调试，golang生成的函数名一般为包名+函数名，例如：</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/09/25/golang学习系列1/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/24/Nginx Rewrite模块学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WFang">
      <meta itemprop="description" content="写作与编程">
      <meta itemprop="image" content="/uploads/pexels-photo-783944.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wfang's notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/24/Nginx Rewrite模块学习/" class="post-title-link" itemprop="url">Nginx Rewrite模块学习</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-24 23:19:58" itemprop="dateCreated datePublished" datetime="2019-09-24T23:19:58+08:00">2019-09-24</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-09-25 11:30:54" itemprop="dateModified" datetime="2019-09-25T11:30:54+08:00">2019-09-25</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Nginx/" itemprop="url" rel="index"><span itemprop="name">Nginx</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2019/09/24/Nginx Rewrite模块学习/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/24/Nginx Rewrite模块学习/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-rewrite模块简介"><a href="#1-rewrite模块简介" class="headerlink" title="1. rewrite模块简介"></a>1. rewrite模块简介</h2><p>ngx_http_rewrite_module属于Http模块，常用功能是通过正则匹配来修改请求的URI或有选择的使某些配置生效。</p>
<p>该模块的常用指令集：</p>
<ul>
<li>break</li>
<li>if</li>
<li>return</li>
<li>rewrite</li>
<li>set</li>
</ul>
<p>指令的执行顺序：</p>
<p>The <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#break" target="_blank" rel="noopener">break</a>, <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if" target="_blank" rel="noopener">if</a>, <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#return" target="_blank" rel="noopener">return</a>, <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite" target="_blank" rel="noopener">rewrite</a>, and <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#set" target="_blank" rel="noopener">set</a> directives are processed in the following order:</p>
<ul>
<li>the directives of this module specified on the <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#server" target="_blank" rel="noopener">server</a> level are executed sequentially;</li>
<li>repeatedly:<ul>
<li>a <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#location" target="_blank" rel="noopener">location</a> is searched based on a request URI;</li>
<li>the directives of this module specified inside the found location are executed sequentially;</li>
<li>the loop is repeated if a request URI was <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite" target="_blank" rel="noopener">rewritten</a>, but not more than <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#internal" target="_blank" rel="noopener">10 times</a>.</li>
</ul>
</li>
</ul>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/09/24/Nginx Rewrite模块学习/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </div>

  


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/uploads/pexels-photo-783944.jpeg"
      alt="WFang">
  <p class="site-author-name" itemprop="name">WFang</p>
  <div class="site-description" itemprop="description">写作与编程</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/wnfg" title="GitHub &rarr; https://github.com/wnfg" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://www.zhihu.com/people/wan-fang-71-11/activities" title="知乎 &rarr; https://www.zhihu.com/people/wan-fang-71-11/activities" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>知乎</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WFang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>

<script src="/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://wnfg.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
